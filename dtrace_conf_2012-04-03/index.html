<html>
  <head lang="en-US">

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=1024, user-scalable=no" />

    <title>DTrace Your Node.js Applications</title>

    <link rel="stylesheet" href="deck.js/core/deck.core.css">
    <link rel="stylesheet" href="deck.js/extensions/goto/deck.goto.css">
    <link rel="stylesheet" href="deck.js/extensions/menu/deck.menu.css">
    <link rel="stylesheet" href="deck.js/extensions/navigation/deck.navigation.css">
    <link rel="stylesheet" href="deck.js/extensions/status/deck.status.css">
    <link rel="stylesheet" href="deck.js/extensions/hash/deck.hash.css">

    <link rel="stylesheet" href="deck.js/themes/style/swiss.css">
    <link rel="stylesheet" href="deck.js/extensions/codemirror/deck.codemirror.css">
    <link rel="stylesheet" href="deck.js/extensions/codemirror/themes/default.css">

    <link rel="stylesheet" id="transition-theme-link" href="deck.js/themes/transition/horizontal-slide.css">

    <link rel="stylesheet" href="index.css">
    <script src="deck.js/modernizr.custom.js"></script>
  </head>
  <body>
    <article class="deck-container">

      <section class="slide" id="intro">
        <h1 id="title">
	  <a class="titlelink" href="http://dtrace.org">DTrace</a>
          Your
          <a class="titlelink" href="http://nodejs.org">Node.js</a>
          JS
	</h1>
        <h2></h2>
	<h3><a href="https://twitter.com/mcavage">Mark Cavage</a></h3>
	<h3><a href="http://wiki.smartos.org/display/DOC/dtrace.conf">dtrace.conf</a>
          April 03, 2012</h3>
      </section>


      <section class="slide" id="aboutme">
        <h2>Me</h2>
        <ul>
          <li><a href="https://twitter.com/mcavage">@mcavage (Twitter)</a></li>
          <li><a href="https://github.com/mcavage">mcavage (GitHub)</a></li>
          <li>mcavage at gmail dot com</li>
        </ul>
      </section>


      <section class="slide" id="whatisnode">
        <h2>Just to level-set (i.e., What's Node.js?)</h2>
        <img src="images/nodejs-light.jpg" />
      </section>


      <section class="slide" id="whatisnodejs">
        <h2>What's Node.js?</h2>
        <ul>
          <li>Server-side Javascript.</li>
          <li>Always non-blocking (threads aren't exposed to you)</li>
          <li>And networking/HTTP are first class</li>
        </ul>
      </section>


      <section class="slide" id="whynode">
        <h2>Why would you use Node.js?</h2>
        <ul>
          <li>You want to spin up some new network service (relatively) quickly</li>
          <li>You want it to talk to other things</li>
          <li>And you care about performance/scalability</li>
        </ul>
      </section>


      <section class="slide" id="agenda">
        <h2>Bored now. What's this talk about?</h2>
        <ul>
          <li>(Briefly) What DTrace is available for node itself</li>
          <li>How to DTrace your application with node-dtrace-provider</li>
          <li>Some example usage of dtrace-provider (ldapjs/restify)</li>
        </ul>
      </section>


      <section class="slide" id="dtraceinnode">
        <h2>DTrace the Node core</h2>
        <ul>
          <li>Basically, you've got USDT probes for socket, http and gc</li>
          <li>Those let you get the basics of what your app is doing</li>
          <li>But it's a pretty course granularity</li>
        </ul>
      </section>


      <section class="slide" id="dtracenode">
        <h2>Some One-liners (thanks @bmc)</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="clike"
                    style="display: none;">
dtrace -n node*:::http-server-request{
    printf(“%s of %s from %s\n”, args[0]->method,
        args[0]->url, args[1]->remoteAddress)}

 dtrace -n http-server-request’{@[args[1]->remoteAddress] = count()}‘

 dtrace -n gc-start’{self->ts = timestamp}’ \
    -n gc-done’/self->ts/{@ = quantize(timestamp - self->ts)}
          </textarea>
        </div>
      </section>


      <section class="slide" id="aboutme">
        <h2>Cool - do I need anything else?</h2>
        <ul>
          <li>As said before, those probes tell you a lot about what the interpreter sees</li>
          <li>They don't tell you much about your app's <i>components</i></li>
          <li>Wouldn't you like to know if say a DB call or a FS call were what was slowing your app down?</li>
        </ul>
      </section>


      <section class="slide" id="spaghetti">
        <h2>What if your infrastructure looks like this?</h2>
        <img src="images/soa-spaghetti.jpg" />
      </section>


      <section class="slide" id="supposeyouhadanodeapp">
        <h2>Suppose you had some (crappy) REST api...</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="javascript"
                    style="display: none;">
var server = require('restify').createServer({
    name: 'foo'
});

server.use(function slowDown(req, res, next) {
    setTimeout(function () {
        return next();
    }, 513);
});

server.get('/hello/:name', function echo(req, res, next) {
    res.send('hello ' + req.params.name);
    return next();
});

server.listen(8080, function() {
    console.log('%s listening at %s', server.name, server.url);
});
          </textarea>
        </div>
      </section>


      <section class="slide" id="seethesleep">
        <h2>Wouldn't it be nice to see that slowdown?</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="clike"
                    style="display: none;">
foo*:::get*-*-start
{
    tracker[arg0, substr(probename, 0, rindex(probename, "-"))] = timestamp;
}

foo*:::get*-*-done
/tracker[arg0, substr(probename, 0, rindex(probename, "-"))]/
{
    this->name = substr(probename, 0, rindex(probename, "-"));
    @[this->name] = quantize(((timestamp - tracker[arg0, this->name]) / 1000000));
    tracker[arg0, substr(probename, 0, rindex(probename, "-"))] = 0;
}
          </textarea>
        </div>
      </section>


      <section class="slide" id="seethesleep2">
        <h2>In action?</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="clike"
                    style="display: none;">
$ ./latency.d
...
$ curl -s http://localhost:8080/hello/dtrace | json
hello dtrace
$ curl -s http://localhost:8080/hello/dtrace | json
hello dtrace
...
  gethelloname-echo
           value  ------------- Distribution ------------- count
               0 |                                         0
               1 |@@@@@@@@@@@@@@@@@@@@                     1
               2 |@@@@@@@@@@@@@@@@@@@@                     1
               4 |                                         0

  gethelloname-slowDown
           value  ------------- Distribution ------------- count
             256 |                                         0
             512 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ 2
            1024 |                                         0
          </textarea>
        </div>
      </section>


      <section class="slide" id="whatjusthappened">
        <h2>Wait. What?</h2>
        <ul>
          <li>There was some magic in <a href="https://github.com/mcavage/node-restify">restify</a></li>
          <li>Under the covers it creates DTrace probes for all the handlers in a server</li>
          <li>The rest of this talk is about showing you how to do that</li>
        </ul>
      </section>


      <section class="slide" id="thanks_chris_andrews">
        <h2>Thanks <a href="https://github.com/chrisa">Chris Andrews</a>!</h2>
        <h3>$ npm install dtrace-provider</h3>
        <ul>
          <li>Allows you to DTrace for your Node.js application code</li>
          <li>Installs everywhere; useful on Solaris derivations/OSX</li>
          <li>You don't need to be root</li>
        </ul>
      </section>


      <section class="slide" id="dtrace_node_provider">
        <h2>What is node-dtrace-provider?</h2>
        <ul>
          <li>Allows you to define DTrace USDT probes on the fly in JS</li>
          <li>This is the third time he's done it.  Used the same technique
            for <a href="http://ruby-dtrace.rubyforge.org/">Ruby</a> and
            <a href="http://search.cpan.org/~chrisa/Devel-DTrace-Provider-0.02/lib/Devel/DTrace/Provider.pm">
              Perl</a></li>
          <li>He's currently "normalizing" all three implementations into
            <a href="https://github.com/chrisa/libusdt">libusdt</a>.
        </ul>
      </section>

      <section class="slide" id="howdoesitwork">
        <h2>Is this magic? How does this work?</h2>
        <ul>
          <li>Dynamically create tracepoints in the running process</li>
          <li>Dynamically creates DOF to describe the provider to the kernel</li>
          <li>ioctl said DOF into the kernel</li>
          <li>For more information,
            see <a href="http://chrisa.github.com/blog/2011/12/04/libusdt-runtime-dtrace-providers/">Chris' blog</a></li>
        </ul>
      </section>

      <section class="slide" id ="howdoiuseit">
        <h2>How do you use it?</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="javascript"
                    style="display: none;">
var fs = require('fs');
var dtp = require('dtrace-provider').createDTraceProvider('nodecat');

dtp.addProbe('fs-read-start', 'char *');
dtp.addProbe('fs-read-done', 'char *', 'char *', 'int');

function readFile(file) {
    dtp.fire('fs-read-start', function () {
        return [file]
    });
    fs.readFile(file, 'utf8', function (e, data) {
        dtp.fire('fs-read-done', function () {
            return [file, e && e.code ? e.code : null, data ? data.length : 0];
        });
        if (e)
            throw e;
        process.stdout.write(data);
    });
}

dtp.enable();
process.argv.slice(2).forEach(function (f) {
    return readFile(f);
});
          </textarea>
        </div>
      </section>


      <section class="slide" id ="nodecat">
        <h2>So, how good are you nodecat?</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="javascript"
                    style="display: none;">
var fs = require('fs');
var dtp = require('dtrace-provider').createDTraceProvider('nodecat');

dtp.addProbe('fs-read-start', 'char *');
dtp.addProbe('fs-read-done', 'char *', 'char *', 'int');

function readFile(file) {
    dtp.fire('fs-read-start', function () {
        return [file]
    });
    fs.readFile(file, 'utf8', function (e, data) {
        dtp.fire('fs-read-done', function () {
            return [file, e && e.code ? e.code : null, data ? data.length : 0];
        });
        if (e)
            throw e;
        process.stdout.write(data);
    });
}

dtp.enable();
process.argv.slice(2).forEach(function (f) {
    return readFile(f);
});
          </textarea>
        </div>
      </section>
      <section class="slide" id="nodeoverhead">
        <h2>Node's read vs system read</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="clike"
                    style="display: none;">
nodecat*:::fs-read-start
{
    node[copyinstr(arg0)] = timestamp;
}


syscall::open:entry
/node[substr(copyinstr(arg0), (rindex(copyinstr(arg0), "/") + 1), 128)]/
{
    this->fname = substr(copyinstr(arg0),rindex(copyinstr(arg0),"/")+1,128);
    sys[strjoin("_", this->fname)] = timestamp;
}


syscall::read:entry
/node[fds[arg0].fi_name] && sys[strjoin("_", fds[arg0].fi_name)]/
{
    self->fd = arg0;
}

syscall::read:return
/self->fd > 0 && arg0 == 0 && !sys[fds[self->fd].fi_name]/
{
    this->fname = fds[self->fd].fi_name;
    sys[this->fname] = (timestamp - sys[strjoin("_", this->fname)]) / 1000;
    sys[strjoin("_", this->fname)] = self->fd = 0;
}


nodecat*:::fs-read-done
/node[copyinstr(arg0)] && sys[copyinstr(arg0)]/
{
    this->fname = copyinstr(arg0);
    this->delta = (timestamp - node[this->fname]) / 1000;
    printf("%-20s\t%-16d\t%-16d\n", this->fname, sys[this->fname], this->delta);
    node[this->fname] = sys[this->fname] = 0;
}
          </textarea>
        </div>
      </section>


      <section class="slide" id="aboutme">
        <h2>Pretty decent in terms of interpreter overhead (μs)</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="clike"
                    style="display: none;">
$ ./nodecat.d
FILE                	SYSTEM TIME     	NODE TIME
intro.js            	17693           	18032
nurl                	33436           	33726
latency.d           	1006            	1456
^C
          </textarea>
          </div>
      </section>


      <section class="slide" id="wtfisthatreadreturnabout">
        <h2>(Tangent) What's with the goofy read:return?</h2>
        <ul>
          <li>man -s 2 read says if (read(fd) == 0) then EOF</li>
          <li>node however decides to keep calling it. and calling it. and
          calling it.</li>
          <li>Hence, that janky D script to get the timing of
            the <i>first</i> return 0 (since the system is ready to move on)</li>
        </ul>
      </section>


      <section class="slide" id="howdoiuseitreprise">
        <h2>Bah! Show me some examples!</h2>
        <ul>
          <li>Ok, ok. Clearly the availability heuristic is going to kick
            in...now!</li>
          <li>Let's look at:
            <ul>
              <li><a href="http://ldapjs.org/">ldapjs</a></li>
              <li><a href="http://mcavage.github.com/node-restify">restify</a></li>
            </ul>
          </li>
        </ul>
      </section>


      <section class="slide" id="ldapjs">
        <h2>ldapjs: hello world server</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="javascript"
                    style="display: none;">
var server = require('ldap').createServer();

server.search('o=example', function(req, res, next) {
    var obj = {
        dn: req.dn.toString(),
        attributes: {
            o: 'example',
            objectclass: ['organization', 'top']
        }
    };

    if (req.filter.matches(obj.attributes))
        res.send(obj);

    res.end();
});

server.listen(1389);
          </textarea>
        </div>
      </section>


      <section class="slide" id="ldapjsdtraceprobes">
        <h2>Show me the probes!</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="clike"
                    style="display: none;">
$ dtrace -l -P ldapjs*
   ID   PROVIDER            MODULE                          FUNCTION NAME
...
21618 ldapjs70778            module                              func server-search-start
21619 ldapjs70778            module                              func server-search-done
21620 ldapjs70778            module                              func server-search-entry
...
          </textarea>
        </div>
      </section>


      <section class="slide" id="ldapjsoneliners">
        <h2>Some search one(ish) liners</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="clike"
                    style="display: none;">
dtrace -n "ldapjs*:::server-search-start{printf(\"search: base=%s, \
    filter=%s from %s\n\", copyinstr(arg3), copyinstr(arg5), \
    copyinstr(arg1));}"
          </textarea>
        </div>
        <div>
          <textarea class="code"
                    name="code"
                    mode="clike"
                    style="display: none;">
ldapjs*:::server-search-start
{
    req[arg0] = timestamp;
}


ldapjs*:::server-search-done
/req[arg0]/
{
    @search = quantize(((timestamp - req[arg0]) / 1000000));
}
          </textarea>
        </div>
      </section>


      <section class="slide" id="ldapopsportal">
        <h2>Fancy: Visualization of ldapjs</h2>
        <img src="images/ldapjs_ops_portal.jpg" />
      </section>


      <section class="slide" id="myfirstpass">
        <h2>That said: it's pretty course granularity</h2>
        <ul>
          <li>This was my first pass at integrating dtrace into node app code.</li>
          <li>Really there's just start/done for each LDAP operation</li>
          <li>Lets us see what a server is doing, but not very well broken out</li>
        </ul>
      </section>


      <section class="slide" id="restifyexplained">
        <h2>Take two: restify</h2>
        <ul>
          <li>Restify lets you build a REST api by pipelining handlers</li>
          <li>After having done ldapjs, what I really wanted was to be able to
          visualize all the steps in a request</li>
          <li>DTrace start/done probes get inserted for <i>every</i> distinct
            handler</li>
        </ul>
      </section>


      <section class="slide" id="restifyexamplebetter">
        <h2>A (slightly) bigger exampe</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="javascript"
                    style="display: none;">
var restify = require('restify');
var server = restify.createServer();
server.use(restify.acceptParser(server.acceptable));
server.use(restify.authorizationParser());
server.use(restify.dateParser());
server.use(restify.queryParser());
server.use(restify.urlEncodedBodyParser());

server.use(function slowHandler(req, res, next) {
  setTimeout(function() { return next(); }, 513);
});

server.get('/hello/:name', function echo(req, res, next) {
  res.send({
    hello: req.params.name
  });
});

server.listen(8080);
          </textarea>
        </div>
      </section>


      <section class="slide" id="nowweretalking">
        <h2>Now we're talking!</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="clike"
                    style="display: none;">
   ID   PROVIDER            MODULE                          FUNCTION NAME
21688 restify88193            module                              func gethelloname-start
21689 restify88193            module                              func gethelloname-done
21690 restify88193            module                              func gethelloname-parseAccept-start
21691 restify88193            module                              func gethelloname-parseAccept-done
21692 restify88193            module                              func gethelloname-parseAuthorization-start
21693 restify88193            module                              func gethelloname-parseAuthorization-done
21694 restify88193            module                              func gethelloname-parseDate-start
21695 restify88193            module                              func gethelloname-parseDate-done
21696 restify88193            module                              func gethelloname-parseQueryString-start
21697 restify88193            module                              func gethelloname-parseQueryString-done
21698 restify88193            module                              func gethelloname-parseUrlEncodedBody-start
21699 restify88193            module                              func gethelloname-parseUrlEncodedBody-done
21700 restify88193            module                              func gethelloname-slowHandler-start
21701 restify88193            module                              func gethelloname-slowHandler-done
21702 restify88193            module                              func gethelloname-echo-start
21703 restify88193            module                              func gethelloname-echo-done
          </textarea>
        </div>
      </section>


      <section class="slide" id="samedscript">
        <h2>The same D script as before...</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="clike"
                    style="display: none;">
restify*:::get*-*-start
{
    tracker[arg0, substr(probename, 0, rindex(probename, "-"))] = timestamp;
}

restify*:::get*-*-done
/tracker[arg0, substr(probename, 0, rindex(probename, "-"))]/
{
    this->name = substr(probename, 0, rindex(probename, "-"));
    @[this->name] = quantize(((timestamp - tracker[arg0, this->name]) / 1000000));
    tracker[arg0, substr(probename, 0, rindex(probename, "-"))] = 0;
}
          </textarea>
        </div>
      </section>


      <section class="slide" id="moredata">
        <h2>Shows us a lot more data</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="clike"
                    style="display: none;">
  gethelloname-parseAccept
           value  ------------- Distribution ------------- count
              -1 |                                         0
               0 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ 15
               1 |                                         0

  gethelloname-parseAuthorization
           value  ------------- Distribution ------------- count
              -1 |                                         0
               0 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ 15
               1 |                                         0

  gethelloname-parseDate
           value  ------------- Distribution ------------- count
              -1 |                                         0
               0 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ 15
               1 |                                         0

  gethelloname-parseQueryString
           value  ------------- Distribution ------------- count
              -1 |                                         0
               0 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ 15
               1 |                                         0

  gethelloname-parseUrlEncodedBody
           value  ------------- Distribution ------------- count
              -1 |                                         0
               0 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ 15
               1 |                                         0

  gethelloname-slowHandler
           value  ------------- Distribution ------------- count
             256 |                                         0
             512 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ 14
            1024 |
          </textarea>
        </div>
      </section>


      <section class="slide" id="restifyworkslike">
        <h2>Every time a route/handler is added</h2>
        <ul>
          <li>restify sets up a start/done DTrace probe for the route</li>
          <li>plus a start/done probe for each handler in the route</li>
          <li>plus a start/done probe for the shared handlers to track in that
            route</li>
          <li>You can glob to your heart's content in D scripts, since the names
            are predictable</li>
        </ul>
      </section>

      <section class="slide" id="restify_mount">
        <h2>mapping code</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="javascript"
                    style="display: none;">
function addProbes(dtrace, name) {

  // id, requestid, authenticated user, user-agent, content-type, content-length
  dtrace.addProbe(name + '-start',
                  'int', 'char *', 'char *', 'char *', 'char *', 'int');

  // id, requestid, statusCode, content-type, content-length
  dtrace.addProbe(name + '-done',
                  'int', 'char *', 'int', 'char *', 'int', 'int');

  return true;
}
          </textarea>
        </div>
      </section>


      <section class="slide" id="restifyrunning">
        <h2>Route runner fires</h2>
        <div>
          <textarea class="code"
                    name="code"
                    mode="javascript"
                    style="display: none;">
function run(req, res) {
    var chain = this.chain;
    var i = -1;
    var self = this;

    function next() {
        if ((i + 1) > 0 && chain[i]) // handler done
            fireProbeDone(self.dtrace, self.probe + '-' + chain[i]._name, req, res);

        if (!done && chain[++i]) {
            fireProbeStart(self.dtrace, self.probe + '-' + chain[i]._name, req);
            return chain[i].call(self, req, res, next);
        }

        // route done
        fireProbeDone(self.dtrace, self.probe, req, res);
    }

    fireProbeStart(this.dtrace, this.probe, req);
    return next();
          </textarea>
        </div>
      </section>


      <section class="slide" id="protip">
        <h2>Some tips on how to use dtrace-provider...</h2>
        <img src="images/protip.jpg" />
      </section>


      <section class="slide" id="piggyback">
        <h2>Ride on top of other probes</h2>
        <img src="images/mrt_on_a_unicorn.jpg" />
        <p>Whenever possible, piggyback on system probes by using an argument you can correlate (like filename in the nodecat example)</p>
      </section>


      <section class="slide" id="choosewisely">
        <h2>Picking arguments</h2>
        <img src="images/grailknight.jpg" />
        <p>There's no support for argument structs (yet), and you only get 6
          arguments to play with, so choose your args wisely</p>
      </section>


      <section class="slide" id="dtracetheframework">
        <h2>Build into your framework</h2>
        <img src="images/bike.jpg" />
        <p><a href="http://ldapjs.org">ldapjs</a> and <a href="http://mcavage.github.com/node-restify">restify</a> are
          two examples where DTrace isn't in user code at all, but provides
          substantial value.</p>
        <li>Most nodey things end up in a control-flow problem</li>
        <li>I.e., everybody I know
          uses <a href="https://github.com/caolan/async">async</a> or a
          home-grown thing like it.</li>
        <li>But that makes an <i>excellent</i> place to put probes.</li>
      </section>


      <section class="slide" id="startdone">
        <h2>Easy latency tracking</h2>
        <ul>
          <li>For any given probe, add -start and -done so latency can be
            calculated</li>
          <li>Where it makes sense, make arg0 be a monotonically increasing
            integer</li>
        </ul>
      </section>


      <section class="slide" id="future">
        <h2>What would be nice in the future?</h2>
        <ul>
          <li>JS objects as probe arguments (i.e., structs)</li>
          <li>Being able to tack on more probes on the fly (i.e., after calling enable())</li>
          <li>Minimizing the disabled probe effect</li>
        </ul>
      </section>


      <section class="slide" id="andwiththat">
        <h2>And with that...</h2>
        <img src="images/all_the_things.jpg" />
      </section>


      <section class="slide" id="endoftalk">
        <h2>Questions?</h2>
	<img src="images/questions.jpg" />
      </section>

      <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
      <a href="#" class="deck-next-link" title="Next">&#8594;</a>

      <p class="deck-status">
        <span class="deck-status-current"></span>
        /
        <span class="deck-status-total"></span>
      </p>

      <form action="." method="get" class="goto-form">
        <label for="goto-slide">Go to slide:</label>
        <input type="number" name="slidenum" id="goto-slide">
        <input type="submit" value="Go">
      </form>

      <a href="." title="Permalink to this slide" class="deck-permalink">#</a>
    </article>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.js"></script>
    <script>window.jQuery || document.write('<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.6.1.min.js">\x3C/script>')</script>

<!-- Deck Core and extensions -->
<script src="deck.js/core/deck.core.js"></script>
<script src="deck.js/extensions/menu/deck.menu.js"></script>
<script src="deck.js/extensions/goto/deck.goto.js"></script>
<script src="deck.js/extensions/status/deck.status.js"></script>
<script src="deck.js/extensions/navigation/deck.navigation.js"></script>
<script src="deck.js/extensions/hash/deck.hash.js"></script>

<!-- include the base codemirror code. -->
<script src="deck.js/extensions/codemirror/codemirror.js"></script>

<!-- include the code syntax you want to highlight -->
<script src="deck.js/extensions/codemirror/mode/javascript/javascript.js"></script>
<script src="deck.js/extensions/codemirror/mode/yaml/yaml.js"></script>

<script src="deck.js/extensions/codemirror/deck.codemirror.js"></script>

<!-- Stuff specific to this page -->
<script src="index.js"></script>

</body>
</html>
